<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Pairs Game</title>
    <style>
        /* ========================================
           SECTION 1: RESET & BASE STYLES
           Week 15: Basic CSS and mobile-first design
        ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }

        /* ========================================
           SECTION 2: HEADER AND GAME INFO STYLES
           Week 15: Layout and typography
        ======================================== */
        h1 {
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .game-info {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        /* ========================================
           SECTION 3: GAME BOARD AND CARD STYLES
           Week 15: CSS Grid and interactive elements
        ======================================== */
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 400px;
            width: 100%;
            margin-bottom: 20px;
        }

        .card {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            user-select: none;
            border: 2px solid #ddd;
        }

        /* ========================================
           SECTION 4: CARD STATE ANIMATIONS
           Week 19: Graphics and animations
        ======================================== */
        .card:hover {
            transform: scale(1.05);
        }

        .card.flipped {
            background: #fff;
            color: #333;
        }

        .card.matched {
            background: #4CAF50;
            color: white;
            transform: scale(0.9);
            cursor: default;
        }

        .card.hidden {
            background: #3498db;
            color: transparent;
        }

        /* ========================================
           SECTION 5: BUTTON AND CONTROL STYLES
           Week 15: Interactive elements
        ======================================== */
        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        button:hover {
            background: #27ae60;
        }

        button:active {
            transform: translateY(1px);
        }

        /* ========================================
           SECTION 6: MESSAGE AND FEEDBACK STYLES
           Week 15: User feedback design
        ======================================== */
        .message {
            margin-top: 20px;
            font-size: 1.1rem;
            text-align: center;
            min-height: 30px;
        }

        .win-message {
            color: #f1c40f;
            font-weight: bold;
            font-size: 1.3rem;
        }

        /* ========================================
           SECTION 7: RESPONSIVE MOBILE DESIGN
           Week 21: Mobile compatibility and testing
        ======================================== */
        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }

            .game-info {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .card {
                width: 70px;
                height: 70px;
                font-size: 1.5rem;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }

            button {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <!-- ========================================
         HTML STRUCTURE SECTION
         Week 14: Semantic HTML and structure
    ======================================== -->
    <h1>üß† Memory Pairs Game</h1>
    
    <!-- Game Statistics Display -->
    <div class="game-info">
        <div>Moves: <span id="moves">0</span></div>
        <div>Pairs: <span id="pairs">0</span>/8</div>
        <div>Time: <span id="timer">00:00</span></div>
    </div>

    <!-- Game Board Container -->
    <div class="game-board" id="gameBoard"></div>

    <!-- Game Control Buttons -->
    <div class="controls">
        <button onclick="startNewGame()">New Game</button>
        <button onclick="resetGame()">Reset</button>
        <button onclick="toggleSound()" id="soundBtn">Sound: ON</button>
    </div>

    <!-- Player Feedback Messages -->
    <div class="message" id="message">Click cards to find matching pairs!</div>

    <script>
        /* ========================================
           SECTION 1: GAME STATE VARIABLES
           Week 16: JavaScript variables and data types
        ======================================== */
        
        // Core game data
        let cards = [];                    // Array to store all card objects
        let flippedCards = [];            // Array to track currently flipped cards
        let matchedPairs = 0;             // Counter for successful matches
        let moves = 0;                    // Player move counter
        let gameTime = 0;                 // Game timer in seconds
        let timerInterval = null;         // Timer interval reference
        let gameStarted = false;          // Flag to track if game has begun
        let soundEnabled = true;          // Audio toggle setting

        // Game content - card symbols
        const symbols = ['üê∂', 'üê±', 'üê≠', 'üêπ', 'üê∞', 'ü¶ä', 'üêª', 'üêº'];

        /* ========================================
           SECTION 2: GAME INITIALIZATION SYSTEM
           Week 16: Functions and game setup
        ======================================== */
        
        function initGame() {
            console.log("Initializing new game...");
            
            // Step 1: Create card pairs
            cards = [];
            for (let i = 0; i < symbols.length; i++) {
                // Create two cards for each symbol (making pairs)
                cards.push({ id: i * 2, symbol: symbols[i], matched: false });
                cards.push({ id: i * 2 + 1, symbol: symbols[i], matched: false });
            }
            
            // Step 2: Randomize card positions
            shuffleArray(cards);
            
            // Step 3: Reset all game counters
            flippedCards = [];
            matchedPairs = 0;
            moves = 0;
            gameTime = 0;
            gameStarted = false;
            
            // Step 4: Update display and create board
            updateDisplay();
            createGameBoard();
            
            // Step 5: Clear any existing timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Step 6: Show initial message
            showMessage("Click cards to find matching pairs!");
        }

        // Utility function to randomize array order
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /* ========================================
           SECTION 3: DOM MANIPULATION SYSTEM
           Week 16: Creating and managing HTML elements
        ======================================== */
        
        function createGameBoard() {
            console.log("Creating game board...");
            const gameBoard = document.getElementById('gameBoard');
            
            // Clear existing board
            gameBoard.innerHTML = '';
            
            // Create a card element for each card in our array
            cards.forEach(card => {
                // Create new div element
                const cardElement = document.createElement('div');
                
                // Set CSS classes and data attributes
                cardElement.className = 'card hidden';
                cardElement.dataset.cardId = card.id;
                cardElement.textContent = card.symbol;
                
                // Add click event listener for interactivity
                cardElement.addEventListener('click', () => handleCardClick(card.id));
                
                // Add card to the board
                gameBoard.appendChild(cardElement);
            });
        }

        /* ========================================
           SECTION 4: EVENT HANDLING SYSTEM
           Week 16: User interaction and event listeners
        ======================================== */
        
        function handleCardClick(cardId) {
            console.log(`Card clicked: ${cardId}`);
            
            // Start the game timer on first click
            if (!gameStarted) {
                startTimer();
                gameStarted = true;
                console.log("Game started!");
            }
            
            // Find the clicked card in our data
            const card = cards.find(c => c.id === cardId);
            const cardElement = document.querySelector(`[data-card-id="${cardId}"]`);
            
            // Validation: Check if card can be flipped
            if (card.matched || 
                flippedCards.includes(cardId) || 
                flippedCards.length >= 2) {
                console.log("Card cannot be flipped");
                return;
            }
            
            // Flip the card
            flippedCards.push(cardId);
            cardElement.classList.remove('hidden');
            cardElement.classList.add('flipped');
            
            // Play flip sound
            playSound('flip');
            
            // Check for match when two cards are flipped
            if (flippedCards.length === 2) {
                moves++;
                updateDisplay();
                console.log(`Two cards flipped. Checking for match...`);
                
                // Delay before checking match (gives player time to see both cards)
                setTimeout(() => {
                    checkForMatch();
                }, 1000);
            }
        }

        /* ========================================
           SECTION 5: GAME LOGIC SYSTEM
           Week 18: Complex game mechanics and logic
        ======================================== */
        
        function checkForMatch() {
            // Get the two flipped cards
            const card1 = cards.find(c => c.id === flippedCards[0]);
            const card2 = cards.find(c => c.id === flippedCards[1]);
            
            console.log(`Checking match: ${card1.symbol} vs ${card2.symbol}`);
            
            if (card1.symbol === card2.symbol) {
                // MATCH FOUND!
                console.log("Match found!");
                
                // Update card data
                card1.matched = true;
                card2.matched = true;
                matchedPairs++;
                
                // Update card visual appearance
                flippedCards.forEach(cardId => {
                    const cardElement = document.querySelector(`[data-card-id="${cardId}"]`);
                    cardElement.classList.remove('flipped');
                    cardElement.classList.add('matched');
                });
                
                // Play success sound and show feedback
                playSound('match');
                showMessage("Great! You found a pair! üéâ");
                
                // Check if player has won the game
                if (matchedPairs === symbols.length) {
                    gameWon();
                }
            } else {
                // NO MATCH
                console.log("No match - flipping cards back");
                
                // Flip cards back to hidden state
                flippedCards.forEach(cardId => {
                    const cardElement = document.querySelector(`[data-card-id="${cardId}"]`);
                    cardElement.classList.remove('flipped');
                    cardElement.classList.add('hidden');
                });
                
                // Play miss sound and show feedback
                playSound('miss');
                showMessage("Not a match. Try again!");
            }
            
            // Clear the flipped cards array for next turn
            flippedCards = [];
            updateDisplay();
        }

        function gameWon() {
            console.log("Game won!");
            
            // Stop the timer
            clearInterval(timerInterval);
            
            // Play victory sound
            playSound('win');
            
            // Show victory message
            showWinMessage();
        }

        /* ========================================
           SECTION 6: SCORING AND TIMER SYSTEM
           Week 18: Data management and tracking
        ======================================== */
        
        function startTimer() {
            console.log("Timer started");
            timerInterval = setInterval(() => {
                gameTime++;
                updateDisplay();
            }, 1000);
        }

        function updateDisplay() {
            // Update all game statistics on screen
            document.getElementById('moves').textContent = moves;
            document.getElementById('pairs').textContent = matchedPairs;
            document.getElementById('timer').textContent = formatTime(gameTime);
        }

        function formatTime(seconds) {
            // Convert seconds to MM:SS format
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        /* ========================================
           SECTION 7: USER FEEDBACK SYSTEM
           Week 16: DOM manipulation for user messages
        ======================================== */
        
        function showMessage(text) {
            const messageElement = document.getElementById('message');
            messageElement.textContent = text;
            messageElement.className = 'message';
            console.log(`Message: ${text}`);
        }

        function showWinMessage() {
            const messageElement = document.getElementById('message');
            messageElement.innerHTML = `
                üéâ Congratulations! You won! üéâ<br>
                Time: ${formatTime(gameTime)} | Moves: ${moves}
            `;
            messageElement.className = 'message win-message';
        }

        /* ========================================
           SECTION 8: AUDIO SYSTEM
           Week 20: Web Audio API and sound effects
        ======================================== */
        
        function playSound(type) {
            // Check if sound is enabled
            if (!soundEnabled) return;
            
            try {
                // Create Web Audio context
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                // Connect audio nodes
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Set different frequencies for different sound types
                switch(type) {
                    case 'flip':
                        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                        console.log("Playing flip sound");
                        break;
                    case 'match':
                        oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);
                        console.log("Playing match sound");
                        break;
                    case 'miss':
                        oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
                        console.log("Playing miss sound");
                        break;
                    case 'win':
                        oscillator.frequency.setValueAtTime(1600, audioContext.currentTime);
                        console.log("Playing win sound");
                        break;
                }
                
                // Set volume and fade out
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                // Play the sound
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
                
            } catch (e) {
                // Audio not supported - fail silently
                console.log("Audio not supported");
            }
        }

        /* ========================================
           SECTION 9: GAME CONTROL FUNCTIONS
           Week 16: Function calls and game state management
        ======================================== */
        
        function startNewGame() {
            console.log("Starting new game");
            initGame();
        }

        function resetGame() {
            console.log("Resetting game");
            initGame();
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('soundBtn').textContent = `Sound: ${soundEnabled ? 'ON' : 'OFF'}`;
            console.log(`Sound ${soundEnabled ? 'enabled' : 'disabled'}`);
        }

        /* ========================================
           SECTION 10: INITIALIZATION AND MOBILE SUPPORT
           Week 21: Mobile compatibility and app startup
        ======================================== */
        
        // Initialize game when page loads
        window.addEventListener('load', () => {
            console.log("Page loaded - initializing game");
            initGame();
        });

        // Handle touch events for better mobile experience
        document.addEventListener('touchstart', function(e) {
            // Prevent default touch behavior that might interfere with the game
            if (e.target.classList.contains('card')) {
                e.preventDefault();
            }
        });

        // Log when script loads
        console.log("Memory Pairs Game script loaded successfully!");
    </script>
</body>
</html>
